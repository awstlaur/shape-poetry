<html>
<head>	
	<script type="text/javascript" src="js/canvg/rgbcolor.js"></script> 
	<script type="text/javascript" src="js/canvg/StackBlur.js"></script>
	<script type="text/javascript" src="js/canvg/canvg.js"></script>
	<script type="text/javascript" src="js/camanjs/dist/caman.full.min.js"></script>
	<script type="text/javascript" src="js/image-processing.js"></script>
	<script type="text/javascript">
	function onLoad() {	
		//load svg into a canvas		
		//canvg('phantomCanvas', 'heart.png');
		//capture data url

		//var phantomCanvas = document.getElementById('phantomCanvas');
		//var img = phantomCanvas.toDataURL('image/png');


		var realCanvas = document.getElementById('canvas');
		var ctx = realCanvas.getContext('2d');
		var img = document.getElementById("heart");
        ctx.drawImage(img, 0, 0)
	

		Caman(realCanvas, img, function(){
			//this.seive(0);
			this.render(renderCallback);
		});
		// var img = new Image();
		// img.src = imgURI;
		// ctx.drawImage(img,0,0);
		//do stuff with pixel data
		function renderCallback(){
			var bm = canvasToBitmap(realCanvas, 130);
			//console.log('final bitmap', bm);
		}
	}
	</script>
</head>
<body onload="onLoad()">
	<img src="heart.png" style="display:none" id="heart">
	<canvas id="phantomCanvas" style="display:none"></canvas>
	<canvas id="canvas"></canvas>
	

</body>
</html>